### 2. المحتوى الرئيسي
#### 2.1 تبرير الأدوار وتقدير الجهد بناءً على القطع الأثرية SA
مثال:
لميزة "وحدة الدفع" (payment_backend.md)

| الدور      | لماذا هناك حاجة لها؟                                                                 | نقصة القصة (min-max) | روابط للقطع الأثرية                          |
|-----------|------------------------------------------------------------------------------------|--------------|---------------------------------------------|
| Backend   | تنفيذ منطق تحويلات معقد مع التحقق من الصحة، المعاملات، التكاملات | 8-13 SP      | payment_backend.md#logic, payment_openAPI.yaml |
| Frontend  | تطوير واجهة المستخدم لنموذج الدفع (بما في ذلك التحقق من صحة الحقول)                    | 3-5 SP       | payment_sequence.plantuml#ui-flow           |
| QA        | اختبار 20+ سيناريو (حالات ناجحة/خطأ/حدودية)                            | 5-8 SP       | payment_backend.md#validation, *_nfr.md#test-cases |
| DevOps    | إعداد مراقبة المعاملات والتنبيه                                     | 3-5 SP       | *_nfr.md#monitoring                         |
| Security  | مراجعة أمنية لبيانات الدفع (PCI DSS)                                           | 2-3 SP       | *_nfr.md#security                           |

طريقة التقدير:
* 1 SP = 1 يوم عمل لأخصائي متوسط المستوى
* النطاق: min (ظروف مثالية) - max (مراعاة المخاطر)
#### 2.2 صياغة المهام
مثال:

```markdown
TASK-101: تنفيذ نواة الدفع  
**الدور**: Backend (8 SP)  
**القطع الأثرية**:  
- المتطلبات: `payment_backend.md#core-logic`  
- API: `payment_openAPI.yaml#paths:/transfer`  
**معايير القبول**:  
- [ ] دعم المعاملات (commit/rollback)  
- [ ] الامتثال لـ NFR (<500ms latency)  

#### 2.3 تحديد الأولويات
معايير تحديد الأولويات:

| العامل     | الوزن | الوصف                          |
|------------|--------|--------------------------------------|
| الوصول      | 30%    | عدد المستخدمين/المعاملات         |
| التأثير     | 25%    | التأثير على مقاييس الأعمال           |
| الثقة | 20%    | الثقة في التقديرات (50-100%)    |
| الجهد     | 25%    | الجهد (SP)                          |

مثال على قائمة المهام المتراكمة ذات الأولوية

| ID  | المهمة                         | الدور     | SP  | الأولوية | في السبريت؟ | القطع الأثرية                          |
|-----|------------------------------|----------|-----|----------|------------|------------------------------------|
| 101 | تنفيذ نواة الدفع  | Backend  | 8   | P0       | ✅         | payment_backend.md#core-logic      |
| 102 | تكامل مع API البنك         | Backend  | 5   | P0       | ✅         | payment_openAPI.yaml#bank-api      |
| 103 | واجهة مستخدم نموذج الدفع              | Frontend | 3   | P1       | ✅         | payment_sequence.plantuml#ui       |
| 104 | إعداد المراقبة             | DevOps   | 3   | P1       | ⚠️ (إذا كان هناك وقت) | *_nfr.md#monitoring              |
| 105 | مراجعة أمنية               | Security | 2   | P2       | ❌         | *_nfr.md#security-audit           |

الشروحات:
* P0: حرج للإطلاق (متطلب أعمال)
* P1: مهم، ولكن يمكن تأجيله لـ 1-2 سبرينت
* P2: أولوية منخفضة (تحسينات)

### 3. مقاييس الجودة
* الاكتمال: 100% من المهام تشير إلى القطع الأثرية SA
* الدقة: ±2 SP من الجهد الفعلي
### 4. المصادر والنتائج

بيانات الإدخال: القطع الأثرية SA
بيانات الإخراج:
   /sprint_24-04
    /backlog_prioritized.md
    /gantt_chart.plantuml
    /dependencies.plantuml
    /risk_register.xlsx
    /team_capacity.md  # توزيع SP حسب الدور

### 5. قواعد الإنشاء
لكل مهمة:
* تحديد روابط دقيقة للقطع الأثرية SA
* حساب min-max SP مع التبرير
المخاطر:
* الاحتمالية (20%/50%/80%)
* محفز واضح (مثال: "خطأ 502 من API البنك")


### 6. القوالب
#### 6.1 قالب جدول الأعمال المتراكم للسبرينت

الملف: {project}_sprint_backlog.md

markdown
الجدول المتراكم للسبرينت {الرقم}  
**التواريخ:** {YYYY-MM-DD} – {YYYY-MM-DD}  
**الهدف:** {وصف موجز لهدف السبرينت}  


 **منهجية التقدير**  
- **1 SP** ≈ 1 يوم عمل لمطور بمستوى متوسط  
- **النطاق الأدنى-الأقصى**:  
  - **الأدنى**: الظروف المثالية (لا توجد معوقات، التبعيات جاهزة)  
  - **الأقصى**: مراعاة المخاطر (مشاكل في التكاملات، إعادة العمل)  


 **ترتيب الأولويات (RICE)**  
| العامل       | الوزن  | معايير التقييم                     |  
|--------------|------|-------------------------------------|  
| **الوصول**    | 30%  | مدى وصول المستخدمين/المعاملات      |  
| **التأثير**   | 25%  | التأثير على مقاييس الأعمال           |  
| **الثقة** | 20% | الثقة في التقدير (50-100%)      |  
| **الجهد**   | 25%  | تكاليف العمالة (SP الأدنى-الأقصى)           |  




 **المهام**  
| المعرف  | الاسم                     | الدور          | SP (الأدنى-الأقصى) | الأولوية | الحالة   | المستندات المرافقة                          |  
|-----|------------------------------|---------------|--------------|-----------|----------|------------------------------------|  
| 101 | تنفيذ نواة الدفع      | Backend       | 8–13         | P0        | قيد الإنتظار    | `payment_backend.md#core-logic`    |  
| 102 | التكامل مع API البنك       | Backend       | 5–8          | P0        | قيد الإنتظار    | `payment_openAPI.yaml#bank-api`    |  
| 103 | واجهة مستخدم نموذج الدفع           | Frontend      | 3–5          | P1        | قيد الإنتظار    | `payment_sequence.plantuml#ui`     |  




 **الخطة الإجمالية حسب SP**  
- **متفائل (الأدنى):** 16 SP  
- **واقعي:** 21 SP  
- **متشائم (الأقصى):** 26 SP  




 **معايير الإكمال**  
-  جميع المهام تجتاز اختبارات القبول  
-  لا توجد أخطاء حرجة (Severity 1-2)  
-  تمت عرض تجريبي لأصحاب المصلحة  


#### 6.2 قالب المهمة
markdown


TASK-{ID}: {الاسم}  
**الدور**: {Backend/Frontend/QA} ({SP} SP)  
**المستندات المرافقة**:  
- المتطلبات: `{file}#{section}`  
- API: `{file}`  
**المخاطر**:  
- {الوصف} (الاحتمالية: {X}%، التخفيف: {الإجراء})  


### 6.3 قالب مخطط جانت
#### 6.3.1 تعليمات إنشاء مخطط جانت في PlantUML

##### 6.3.1.1 مقدمة
    مخطط جانت هو أداة لإدارة المشاريع، تُظهر المهام على محور زمني: تواريخ البدء/الانتهاء، المدة، التسلسلات وتقاطعات المهام. يوفر PlantUML صيغة نصية لوصف مخططات جانت، مما يعد مناسبًا للتحكم في الإصدارات والتوليد التلقائي.

##### 6.3.1.2 قبل توليد المخطط اسأل:
1. اسأل المستخدم عن تاريخ بدء المشروع ولا تبدأ التوليد دون إجابة
2. اسأل المستخدم عن اللغة التي يجب إنشاء المخطط بها، مع تقديم الخيارات التالية:
- الروسية
- الإنجليزية
- الإسبانية
- العربية
- الصينية

---

##### 6.3.1.3 متطلبات وترتيب توليد المخطط في PlantUML
1. أثناء إنشاء المخطط، طبق مبدأ KISS (Keep It Simple, Stupid أو Keep It Short and Simple) - وهو مبدأ أساسي في التصميم والتطوير، ينص على أن معظم الأنظمة تعمل بشكل أفضل عندما تبقى بسيطة بدلاً من جعلها معقدة بشكل مفرط.
2. عند توليد المخطط، استرشد بما يلي:
- هذه التعليمات
- الأمثلة الموضحة في الرابط: https://plantuml.com/ru/gantt-diagram
- يُمنع الانحراف عن هذه التعليمات والأمثلة
   

##### 6.3.1.4 الإجراءات التي يجب اتخاذها بناءً على ردود المستخدم:
1. يجب تحويل تاريخ بدء المشروع المحدد من قبل المستخدم إلى التنسيق `YYYY-MM-DD` (مثال: `2025-09-25`) وتحديده بعد `Project starts` (مثال:`Project starts 2025-09-25`)
2. حدد لغة المستخدم، وإذا تم تحديد:
   - الروسية، فيجب أن يحتوي الكود على `language ru`
   - الإنجليزية، فيجب أن يحتوي الكود على `language en`
   - الإسبانية، فيجب أن يحتوي الكود على `language es`
   - العربية، فيجب أن يحتوي الكود على `language ar`
   - الصينية، فيجب أن يحتوي الكود على `language zh`
3. قم بتوليد المخطط باللغة التي اختارها المستخدم
   

##### 6.3.1.5 أساسيات الصيغة

- يبدأ المخطط وينتهي بكتلة `@startgantt` / `@endgantt`.
- يتم الإعلان عن المهام بين قوسين معقوفين: `[اسم المهمة]`.
- يجب أن يشير اسم المهمة إلى [الاسم ([الأيام] يوم أو أيام)]


###### 6.3.1.5.1 حجم العمل
لتعيين المدة، استخدم الفعل `requires`:

plantuml
@startgantt
[تصميم النموذج الأولي] requires 15 days
[اختبار النموذج الأولي] requires 10 days
-- كل الأمثلة --
[المهمة 1 (1 يوم)] requires 1 day
[المهمة 2 (5 أيام)] requires 5 days
[المهمة 2 (7 أيام)] requires 1 week
[المهمة 1 (11 يوم)] requires 1 week and 4 days
[المهمة 1 (14 يوم)] requires 2 weeks
@endgantt


> ملاحظة: الأسبوع عادة 7 أيام، ولكن مع الأيام "المغلقة" (عطلات نهاية الأسبوع) قد يُفسر الأسبوع على أنه 5 أيام عمل.

###### 6.3.1.5.2 البدء (start)

- يتم تعيين تاريخ البدء باستخدام `start` (تاريخ مطلق)
- يُمنع استخدام التاريخ النسبي D+N

plantuml
@startgantt
[تصميم النموذج الأولي] requires 15 days
[اختبار النموذج الأولي] requires 10 days

Project starts 2020-07-01
[تصميم النموذج الأولي] starts 2020-07-01
[اختبار النموذج الأولي] starts 2020-07-16
@endgantt


###### 6.3.1.5.3 الانتهاء (end)

- يتم تعيين تاريخ الانتهاء عبر `ends`:
- يُمنع استخدام النهاية النسبية بالتنسيق D+N
plantuml
@startgantt
[تصميم النموذج الأولي] requires 15 days
[اختبار النموذج الأولي] requires 10 days

Project starts 2020-07-01
[تصميم النموذج الأولي] ends 2020-07-15
[اختبار النموذج الأولي] ends 2020-07-25
@endgantt



###### 6.3.1.5.4 التعيين المتزامن للبدء والانتهاء (Start/End)

يمكنك تعيين كل من `starts` و `ends` للمهمة مرة واحدة:

plantuml
@startgantt
Project starts 2020-07-01
language ar
saturday are closed
sunday are closed
printscale daily zoom 2
[تصميم النموذج الأولي] starts 2020-07-01
[اختبار النموذج الأولي] starts 2020-07-16
[تصميم النموذج الأولي] ends 2020-07-15
[اختبار النموذج الأولي] ends 2020-07-25
@endgantt


---

###### 6.3.1.5.5 الإعلان في سطر واحد (باستخدام `and`)

يمكنك دمج الإعلان في سطر واحد باستخدام `and`:

plantuml
@startgantt
Project starts 2020-07-01
language ar
saturday are closed
sunday are closed
printscale daily zoom 2
[تصميم النموذج الأولي] starts 2020-07-01 and ends 2020-07-15
[اختبار النموذج الأولي] starts 2020-07-16 and requires 10 days
@endgantt


---

###### 6.3.1.5.6 القيود بين المهام (التبعيات)

إضافة القيود:

plantuml
@startgantt
[تصميم النموذج الأولي] requires 15 days
[اختبار النموذج الأولي] requires 10 days
[اختبار النموذج الأولي] starts at [تصميم النموذج الأولي]'s end
@endgantt


مثال على السلسلة:

plantuml
@startgantt
[تصميم النموذج الأولي] requires 10 days
[برمجة النموذج الأولي] requires 10 days
[كتابة الاختبارات] requires 5 days
[برمجة النموذج الأولي] starts at [تصميم النموذج الأولي]'s end
[تصميم النموذج الأولي] starts at [كتابة الاختبارات]'s end
@endgantt


---

###### 6.3.1.5.7 أسماء مستعارة للمهام (`as`)

أسماء قصيرة (أسماء مستعارة):

plantuml
@startgantt
[تصميم النموذج الأولي] as [د] requires 15 days
[اختبار النموذج الأولي] as [ت] requires 10 days
[ت] starts at [د]'s end
@endgantt


---

###### 6.3.1.5.8 مهام لها نفس الأسماء

بدءًا من الإصدار V1.2024.6، يمكنك إنشاء مهام لها أسماء عرض متطابقة عن طريق تعيين اسم مستعار منفصل لكل منها:

plantuml
@startgantt
Project starts 2020-11-08
[المهمة 7 أيام] as [م7] starts at 2020-11-09
[م7] ends at 2020-11-15
[المهمة 7 أيام] as [م7ثانية] starts at 2020-11-09
[م7ثانية] ends at 2020-11-15
@endgantt


أو مثال بالألوان/التبعية:

plantuml
@startgantt
[نفساسمالمهمة] as [م1] lasts 7 days and is colored in pink
[نفساسمالمهمة] as [م2] lasts 3 days and is colored in orange
[م1] -> [م2]
@endgantt

###### 6.3.1.5.9. عنوان المخطط
- من الضروري إضافة عنوان للمخطط: `title 'مخطط جانت ([اسم المشروع])'`

مثال:
plantuml
@startgantt
title 'مخطط جانت (خدمة بيع الكعك)'
@endgantt


---
##### 6.3.1.6. معايير الجودة:

1. تم استلام رد من المستخدم حول تاريخ بدء المشروع
2. لا تستخدم الألوان `LightCyan` و `LightYellow` عند تحديد `is colored in`
3. يُمنع استخدام مجموعات `start + [العدد] days` في الكود، على سبيل المثال `start + 14 days`
4. عند توليد المخطط، استرشد بما يلي:
   - هذه التعليمات
   - الأمثلة الموضحة في الرابط: https://plantuml.com/ru/gantt-diagram
   - يُمنع الانحراف عن هذه التعليمات والأمثلة
5. لا تستخدم `section`
6. اسم جميع الأقسام كـ `--**القسم**--`، وقم بالتقسيم إلى الأجزاء التالية:
   - جمع وتحليل المتطلبات
   - تصميم الهندسة المعمارية
   - التطوير
   - التكاملات
   - الاختبار
   - النشر
   - مخاطر المشروع
   - معالم المشروع
7. يجب أن يحدد المخطط لغة المستخدم، وإذا تم تحديد:
   - الروسية، فيجب أن يحتوي الكود على `language ru`
   - الإنجليزية، فيجب أن يحتوي الكود على `language en`
   - الإسبانية، فيجب أن يحتوي الكود على `language es`
   - العربية، فيجب أن يحتوي الكود على `language ar`
   - الصينية، فيجب أن يحتوي الكود على `language zh`
8. اسم قسم `--**التبعيات**--` في الكود كتعليق `' التبعيات`
9. يجب أن يتضمن المخطط: `المهام الرئيسية` و `المخاطر`
10. قبل الحفظ، من الضروري التحقق من الامتثال الصارم لهذا المستند وـ PlantUML
11. يجب أن يتم توليد المخطط باللغة التي اختارها المستخدم فقط
12. يتم تسمية الملفات على النحو التالي:
- إذا تم تحديد `printscale` كـ `printscale daily zoom 2`، يكون اسم الملف: `[اسم المشروع]_[اسم المخطط]_[إصدار المستند بالتنسيق: v_[ثانوي]_[رئيسي]_[ترقيع]]_يومي_[لغة المخطط].puml`
- إذا تم تحديد `printscale` كـ `printscale printscale weekly zoom 1`، يكون اسم الملف: `[اسم المشروع]_[اسم المخطط]_[إصدار المستند بالتنسيق: v_[ثانوي]_[رئيسي]_[ترقيع]]_أسبوعي_[لغة المخطط].puml`

   




#### 6.4 قالب مخطط التبعيات


الملف: {project}_dependencies.plantuml


plantuml


@startuml {project}_dependencies


title مخطط التبعيات - {اسم المشروع}
' الإصدار: {الإصدار}
' المؤلف: {الاسم الكامل}


skinparam monochrome true
skinparam arrowColor #2E5A87
skinparam componentStyle uml2


component "[النظام]"] as system {
    [المكون أ] as compA
    [المكون ب] as compB
}


actor "المستخدم" as user
database "قاعدة البيانات الخارجية" as ext_db


user --> compA : "طلب"
compA --> compB : "بيانات"
compB --> ext_db : "مزامنة"


@enduml