### 4.4. Use Cases (UC, حالات الاستخدام, UC, use cases)
**تعليمات كتابة Use Case لعامل ذكاء اصطناعي**

#### 4.4.1. المحتوى
1. [قالب Use Case](#قالب-use-case)
2. [مقاييس الجودة](#مقاييس-الجودة)
3. [قواعد التحقق](#قواعد-التحقق)
4. [أمثلة Use Case](#أمثلة-use-case)
5. [معايير الجودة](#معايير-الجودة)

---

#### 4.4.2. قالب Use Case

##### 4.4.2.1. الهيكل الإلزامي (9 عناصر):

| № | العنصر | الوصف | مثال |
|---|---------|----------|---------|
| 1 | **الاسم** | فعل + اسم + سياق | "إنشاء طلب بواسطة العميل" |
| 2 | **User Story (US)** | "بصفتي [دور]، أريد [وظيفة]، حتى [قيمة]" | US-1: بصفتي عميلاً، أريد إنشاء طلب... |
| 3 | **المشاركون** | الممثل الرئيسي + ممثلون ثانويون | العميل، النظام، CRM، خدمة البريد الإلكتروني |
| 4 | **الشروط المسبقة** | ما يجب إكماله قبل البدء | المستخدم مصرح له |
| 5 | **القيود** | قيود النظام/الأعمال | حد أقصى 10 عناصر في الطلب |
| 6 | **المشغل** | الحدث الذي يبدأ السيناريو | النقر على زر "تقديم الطلب" |
| 7 | **السيناريو الرئيسي** | المسار السعيد - تسلسل الخطوات | 1. المستخدم يحدد العناصر... |
| 8 | **السيناريوهات البديلة** | التفرع من المسار الرئيسي | الخطوة 3: إذا كان العنصر غير متوفر... |
| 9 | **الشروط اللاحقة** | نتيجة تنفيذ السيناريو | تم إنشاء الطلب وحفظه في قاعدة البيانات |

---

#### 4.4.3. مقاييس الجودة

##### 4.4.3.1. المؤشرات المستهدفة:
- **اكتمال الهيكل**: 9/9 عناصر إلزامية = 100%
- **تغطية السيناريو**: رئيسي + حد أدنى 2 بديل = جودة ممتازة
- **تفصيل الخطوة**: 5-15 خطوة في السيناريو الرئيسي = أمثل
- **تماسك الهيكل**: 100% من الممثلين يجب أن يكونوا حاضرين في هيكل النظام

##### 4.4.3.2. نظام التقييم:
- **جودة ممتازة**: 90-100% امتثال للمقاييس
- **جودة جيدة**: 70-89% امتثال للمقاييس
- **يحتاج تحسين**: <70% امتثال للمقاييس

---

#### 4.4.4. قواعد التحقق

##### 4.4.4.1. فحوصات تلقائية:

###### 4.4.4.1.1. التحقق الهيكلي

✓ جميع العناصر الإلزامية التسعة موجودة
✓ الاسم يحتوي على فعل عمل
✓ User Story تتوافق مع تنسيق "بصفتي-أريد-حتى"
✓ حد أدنى 1 ممثل رئيسي محدد


###### 4.4.4.1.2. التحقق المنطقي

✓ المشغل مرتبط منطقياً بالسيناريو الرئيسي
✓ السيناريوهات البديلة تشير إلى خطوات الرئيسي
✓ الشروط اللاحقة قابلة للتحقيق من خلال السيناريو الرئيسي
✓ الشروط المسبقة لا تتعارض مع المنطق التجاري


###### 4.4.4.1.3. التحقق التكاملي

✓ الممثلون يتوافقون مع الأدوار من User Stories
✓ مكونات النظام موجودة في مخطط الهيكل
✓ طرق API محددة في المواصفات الفنية


---

#### 4.4.5. أمثلة Use Case

##### 4.4.5.1. المثال 1: طلب ملاحظات سريع

| **العنصر** | **الوصف** |
|-------------|--------------|
| **الاسم** | UC-1. تقديم طلب سريع عبر نموذج الملاحظات |
| **User Story** | US-1: بصفتي مستخدم للنظام، أريد تقديم طلب بسرعة لتوفير الوقت في ملء النموذج |
| **المشاركون** | • الرئيسي: مستخدم النظام<br>• الثانويون: واجهة الويب، Backend API، نظام CRM |
| **الشروط المسبقة** | • المستخدم مصرح له<br>• نموذج تقديم الطلب مفتوح<br>• مفتاح وظيفة الوصول السريع مفعل |
| **القيود** | • الدرج متاح فقط عند إنشاء طلب<br>• حد أقصى 5 قوالب للاختيار من بينها |
| **المشغل** | المستخدم ينقر على عنصر الوصول السريع في النموذج |
| **السيناريو الرئيسي** | 1. المستخدم يفتح نموذج تقديم الطلب<br>2. النظام يعرض النموذج مع عنصر الوصول السريع<br>3. المستخدم ينقر على عنصر الوصول السريع<br>4. النظام يفتح درجًا بأزرار رابط للقوالب<br>5. المستخدم يختار قالبًا مناسبًا<br>6. النظام يعيد التوجيه إلى نموذج مملوء مسبقًا<br>7. المستخدم يكمل البيانات المفقودة<br>8. النظام يحفظ الطلب |
| **السيناريوهات البديلة** | **الخطوة 3**: إذا كان المستخدم جديدًا → إظهار إشعار "الدعم"<br>**الخطوة 4**: عند تحميل القوالب → إظهار أداة التحميل<br>**الخطوة 5**: خطأ 4XX/5XX → رسالة "خطأ في التحميل، يرجى المحاولة لاحقًا"<br>**الخطوة 6**: إغلاق الدرج عبر "X" أو النقر بالخارج → العودة إلى النموذج الرئيسي |
| **الشروط اللاحقة** | • تم إنشاء الطلب وحفظه في CRM<br>• المستخدم تلقى تأكيدًا<br>• تم إرسال مقاييس استخدام الوظيفة |

##### 4.4.5.2. المثال 2: تسجيل المستخدم

| **العنصر** | **الوصف** |
|-------------|--------------|
| **الاسم** | UC-2. تسجيل مستخدم جديد في النظام |
| **User Story** | US-2: بصفتي مستخدم جديد، أريد التسجيل في النظام للحصول على الوصول إلى الوظائف الشخصية |
| **المشاركون** | • الرئيسي: مستخدم غير مسجل<br>• الثانويون: نموذج الويب، واجهة برمجة تطبيقات التسجيل، خدمة البريد الإلكتروني، قاعدة البيانات |
| **الشروط المسبقة** | • المستخدم في صفحة التسجيل<br>• خدمة البريد الإلكتروني متاحة<br>• قاعدة البيانات متاحة |
| **القيود** | • البريد الإلكتروني يجب أن يكون فريدًا<br>• كلمة المرور 8 أحرف على الأقل<br>• التسجيل متاح فقط مع بريد إلكتروني مؤكد |
| **المشغل** | المستخدم ينقر على زر "تسجيل" |
| **السيناريو الرئيسي** | 1. المستخدم يملأ النموذج (الاسم، البريد الإلكتروني، كلمة المرور)<br>2. النظام يتحقق من صحة البيانات المدخلة<br>3. النظام يتحقق من تفرد البريد الإلكتروني<br>4. النظام ينشئ حسابًا بحالة "غير مؤكد"<br>5. النظام يرسل بريد تأكيد<br>6. المستخدم ينقر على الرابط في البريد الإلكتروني<br>7. النظام ينشط الحساب<br>8. النظام يعرض رسالة نجاح التسجيل |
| **السيناريوهات البديلة** | **الخطوة 2**: البيانات غير صالحة → إظهار أخطاء التحقق<br>**الخطوة 3**: البريد الإلكتروني موجود بالفعل → عرض استعادة كلمة المرور<br>**الخطوة 5**: خطأ في إرسال البريد الإلكتروني → حفظ الحساب، عرض التعليمات<br>**الخطوة 6**: انتهت صلاحية الرابط → عرض إعادة الإرسال |
| **الشروط اللاحقة** | • تم إنشاء الحساب وتنشيطه<br>• يمكن للمستخدم تسجيل الدخول<br>• تم إرسال بريد ترحيبي |

---

#### 4.4.6. معايير الجودة للذكاء الاصطناعي

##### 4.4.6.1. المتطلبات الهيكلية
- **الاكتمال**: يجب ملء جميع العناصر التسعة
- **التفصيل**: السيناريو الرئيسي 5-15 خطوة
- **التغطية**: حد أدنى 2-3 سيناريو بديل

##### 4.4.6.2. المتطلبات المنطقية
- **التسلسل**: الخطوات مترابطة منطقيًا
- **الواقعية**: السيناريوهات قابلة للتنفيذ ضمن النظام
- **اكتمال التفرع**: تغطية الحالات الرئيسية للخطأ

##### 4.4.6.3. متطلبات التكامل
- **التماسك**: الممثلون يتوافقون مع الهيكل
- **إمكانية التتبع**: Use Case مرتبط بـ User Story
- **القابلية التقنية للتنفيذ**: مراعاة قيود النظام

##### 4.4.6.4. متطلبات خاصة
- **مفاتيح الوظائف**: مراعاة الوظائف الشرطية (test:true)
- **خصوصية المنصة**: الاختلافات بين الويب/الجوال محددة صراحة
- **معالجة الأخطاء**: وصف السلوك عند 4XX/5XX
- **تجربة المستخدم**: مراعاة أدوات التحميل، الإشعارات، إغلاق النماذج

---

#### 4.4.7. قائمة التحقق من Use Case

##### 4.4.7.1. فحص إلزامي:
- [ ] ✅ الاسم يحتوي على الفعل والسياق
- [ ] ✅ User Story بتنسيق "بصفتي-أريد-حتى"
- [ ] ✅ تحديد جميع المشاركين (رئيسي + ثانوي)
- [ ] ✅ الشروط المسبقة قابلة للتحقيق
- [ ] ✅ القيود واقعية
- [ ] ✅ المشغل محدد بوضوح
- [ ] ✅ السيناريو الرئيسي 5-15 خطوة
- [ ] ✅ السيناريوهات البديلة تشير إلى الرئيسي
- [ ] ✅ الشروط اللاحقة قابلة للتحقيق

##### 4.4.7.2. فحص نوعي:
- [ ] 🎯 السيناريوهات تغطي 80%+ من الحالات الحقيقية
- [ ] 🎯 الممثلون موجودون في هيكل النظام
- [ ] 🎯 تم تأكيد القابلية التقنية للتنفيذ
- [ ] 🎯 معالجة الأخطاء مفصلة

**الهدف**: إنشاء Use Cases جاهزة للتسليم للتطوير دون الحاجة إلى توضيحات إضافية.

