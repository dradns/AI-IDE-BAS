@startuml
skinparam defaultFontName "Segoe UI"
skinparam defaultFontSize 10
skinparam backgroundColor #FFFFFF

title Автопроигрывание видео в ленте

|Пользователь|
start
:Прокручивает ленту;

|Клиентское приложение|
:Определяет видео в зоне видимости >50%;
:Запрашивает метаданные через gRPC;

|gRPC Сервер|
:Возвращает метаданные видео;

|Клиентское приложение|
if (Скорость сети >1Mbps?) then (да)
  :Начинает буферизацию HD;
else (нет)
  :Начинает буферизацию SD;
endif

:Автопроигрывание без звука;

|Пользователь|
if (Тап на видео?) then (да)
  |Клиентское приложение|
  :Включает звук;
  :Отправляет метрику просмотра;
else (нет)
  :Продолжает просмотр ленты;
endif

stop

@enduml