# Шаблон нефункциональных требований (NFR)

## Содержание
1. [Введение](#введение)
2. [Структура NFR](#структура-nfr)
3. [Основные категории NFR](#основные-категории-nfr)
4. [Шаблоны по категориям](#шаблоны-по-категориям)
5. [Метрики и измерения](#метрики-и-измерения)
6. [Инструменты и методы](#инструменты-и-методы)
7. [Контрольные чек-листы](#контрольные-чек-листы)
8. [Примеры заполнения](#примеры-заполнения)

## Введение

Нефункциональные требования (NFR) определяют качественные характеристики системы, которые влияют на производительность, безопасность, надежность и удобство использования. В отличие от функциональных требований, NFR описывают не что система делает, а как она это делает.

### Ключевые характеристики качественных NFR:
1. **Измеримость** - конкретные числовые показатели
2. **Тестируемость** - объективная проверка
3. **Реалистичность** - достижимость в рамках проекта
4. **Приоритизация** - определенный приоритет
5. **Обоснованность** - важность для бизнеса

## Структура NFR

### Обязательные элементы:
1. **Уникальный идентификатор** - формат: NFR-XXX
2. **Название категории** - тип требования (Производительность, Безопасность, и т.д.)
3. **Описание** - четкое описание того, что система должна обеспечивать
4. **Критерии измерения** - конкретные измеримые показатели с единицами измерения
5. **Приоритет** - Критический/Высокий/Средний/Низкий
6. **Обоснование** - важность для бизнеса

### Универсальный шаблон NFR:
```
NFR-XXX: [Название требования]
Описание: [Четкое описание того, что система должна обеспечивать]
Критерии измерения:
- [Критерий 1 с конкретными значениями и единицами измерения]
- [Критерий 2 с конкретными значениями и единицами измерения]
- [Условия измерения и тестирования]
Приоритет: [Критический/Высокий/Средний/Низкий]
Обоснование: [Почему это требование важно для бизнеса]
```

## Основные категории NFR

### 1. Производительность (Performance)
- **Время отклика**: не более 2 секунд при нагрузке до 1000 пользователей
- **Пропускная способность**: не менее 500 транзакций в секунду
- **Использование ресурсов**: CPU не более 70%, память не более 2 GB

### 2. Безопасность (Security)
- **Аутентификация**: многофакторная, блокировка после 5 неудачных попыток
- **Защита данных**: шифрование AES-256, TLS 1.3
- **Авторизация**: проверка ролей для каждого запроса

### 3. Надежность (Reliability)
- **Доступность**: не менее 99.9% в месяц
- **Время восстановления**: не более 15 минут после сбоя
- **Отказоустойчивость**: резервирование критических компонентов

### 4. Масштабируемость (Scalability)
- **Горизонтальная**: линейное увеличение при добавлении серверов
- **Вертикальная**: увеличение ресурсов дает пропорциональный прирост
- **Автоматическое масштабирование**: в зависимости от нагрузки

### 5. Удобство использования (Usability)
- **Время обучения**: не более 2 часов для нового пользователя
- **Количество кликов**: не более 3 для основных операций
- **Доступность**: соответствие WCAG 2.1 AA

### 6. Совместимость (Compatibility)
- **Браузерная**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **Интеграционная**: REST API, JSON/XML, SSO
- **Платформенная**: Windows Server 2019+, Linux Ubuntu 20.04+

### 7. Переносимость (Portability)
- **Кроссплатформенность**: Windows, Linux, Docker, Kubernetes
- **Облачное развертывание**: AWS, Azure, GCP

### 8. Поддерживаемость (Maintainability)
- **Модульность**: четкие границы компонентов
- **Документация**: API, покрытие тестами не менее 80%
- **Развертывание**: не более 30 минут для новой версии

## Шаблоны по категориям

### 1. Производительность (Performance)

#### Шаблон NFR для производительности:
```
NFR-PERF-XXX: [Название требования производительности]
Описание: [Описание требуемой производительности системы]
Критерии измерения:
- Время отклика: [значение] [единица] при [условия нагрузки]
- Пропускная способность: [значение] [единица] 
- Использование ресурсов: CPU не более [%], память не более [GB]
- Время загрузки страницы: не более [секунд]
Условия измерения:
- Среда: [характеристики тестовой среды]
- Нагрузка: [количество пользователей/запросов]
- Длительность: [время тестирования]
Инструменты: [список инструментов для измерения]
Приоритет: [Критический/Высокий/Средний/Низкий]
Обоснование: [важность для бизнеса]
```

#### Пример NFR производительности:
```
NFR-PERF-001: Производительность поиска товаров
Описание: Система поиска товаров должна обеспечивать быстрый отклик при высокой нагрузке
Критерии измерения:
- Время поиска: не более 1 секунды при 1000 одновременных запросов
- Пропускная способность: 2000 поисковых запросов в секунду
- Время загрузки результатов: не более 500 мс (95-й процентиль)
- Использование CPU: не более 60% при пиковой нагрузке
Условия измерения:
- Среда: 8 CPU, 16 GB RAM, SSD, 100 Mbps сеть
- Нагрузка: 1000 одновременных пользователей
- Данные: 1,000,000 товаров, 10,000 категорий
Инструменты: Apache JMeter, Gatling, Prometheus
Приоритет: Критический
Обоснование: Скорость поиска критична для конверсии продаж
```

### 2. Безопасность (Security)

#### Шаблон NFR для безопасности:
```
NFR-SEC-XXX: [Название требования безопасности]
Описание: [Описание требуемых мер безопасности]
Критерии измерения:
- Аутентификация: [методы и параметры]
- Авторизация: [механизмы контроля доступа]
- Защита данных: [методы шифрования и защиты]
- Аудит: [логирование и мониторинг]
Условия тестирования:
- Сценарии: [список тестовых сценариев]
- Инструменты: [инструменты для тестирования безопасности]
- Стандарты: [соответствие стандартам]
Приоритет: [Критический/Высокий/Средний/Низкий]
Обоснование: [важность для бизнеса]
```

#### Пример NFR безопасности:
```
NFR-SEC-001: Аутентификация пользователей
Описание: Система должна обеспечивать безопасную аутентификацию пользователей
Критерии измерения:
- Многофакторная аутентификация: обязательна для администраторов
- Блокировка аккаунта: после 5 неудачных попыток на 30 минут
- Сложность пароля: минимум 8 символов, буквы+цифры+спецсимволы
- Время сессии: не более 8 часов бездействия
- Шифрование паролей: bcrypt с солью, минимум 12 раундов
Условия тестирования:
- Сценарии: брутфорс атаки, перебор паролей, SQL инъекции
- Инструменты: OWASP ZAP, Burp Suite, Metasploit
- Стандарты: OWASP Top 10, NIST Cybersecurity Framework
Приоритет: Критический
Обоснование: Защита персональных данных пользователей
```

### 3. Надежность (Reliability)

#### Шаблон NFR для надежности:
```
NFR-REL-XXX: [Название требования надежности]
Описание: [Описание требуемой надежности системы]
Критерии измерения:
- Доступность: [процент времени работы] в [период]
- Время восстановления (MTTR): не более [время]
- Время между отказами (MTBF): не менее [время]
- Отказоустойчивость: [описание механизмов]
Условия тестирования:
- Сценарии отказа: [список тестовых сценариев]
- Планы восстановления: [процедуры восстановления]
- Мониторинг: [метрики и алерты]
Приоритет: [Критический/Высокий/Средний/Низкий]
Обоснование: [важность для бизнеса]
```

#### Пример NFR надежности:
```
NFR-REL-001: Доступность системы
Описание: Система должна обеспечивать высокую доступность для пользователей
Критерии измерения:
- Доступность: не менее 99.9% в месяц (максимум 43 минуты простоя)
- Время восстановления (MTTR): не более 15 минут после сбоя
- Время между отказами (MTBF): не менее 720 часов (30 дней)
- Плановые работы: не более 4 часов в месяц в нерабочее время
- Мониторинг: 24/7 с алертами при недоступности более 1 минуты
Условия тестирования:
- Сценарии: отказ сервера, отказ базы данных, отказ сети
- Планы восстановления: автоматический failover, резервные копии
- Мониторинг: Pingdom, New Relic, собственные health checks
Приоритет: Критический
Обоснование: Недоступность системы приводит к потере продаж
```

### 4. Масштабируемость (Scalability)

#### Шаблон NFR для масштабируемости:
```
NFR-SCAL-XXX: [Название требования масштабируемости]
Описание: [Описание требуемой масштабируемости системы]
Критерии измерения:
- Горизонтальная масштабируемость: [количество узлов] с [эффективность]
- Вертикальная масштабируемость: [увеличение ресурсов] дает [прирост]
- Автоматическое масштабирование: [условия и границы]
- Производительность при масштабировании: [метрики]
Условия тестирования:
- Сценарии нагрузки: [тестовые сценарии масштабирования]
- Архитектурные решения: [описание архитектуры]
- Мониторинг: [метрики масштабирования]
Приоритет: [Критический/Высокий/Средний/Низкий]
Обоснование: [важность для бизнеса]
```

#### Пример NFR масштабируемости:
```
NFR-SCAL-001: Горизонтальная масштабируемость веб-серверов
Описание: Система должна линейно масштабироваться при добавлении серверов
Критерии измерения:
- Линейное масштабирование: увеличение серверов в 2 раза дает прирост производительности в 1.8-2.0 раза
- Максимальное количество серверов: до 20 серверов в кластере
- Автоматическое масштабирование: добавление серверов при CPU > 70% более 5 минут
- Удаление серверов: при CPU < 30% более 10 минут
- Балансировка нагрузки: равномерное распределение с отклонением не более 10%
Условия тестирования:
- Сценарии: постепенное увеличение нагрузки, пиковые нагрузки
- Архитектура: stateless приложение, shared database, load balancer
- Мониторинг: CPU, память, количество серверов, время отклика
Приоритет: Высокий
Обоснование: Поддержка роста пользователей без деградации
```

### 5. Удобство использования (Usability)

#### Шаблон NFR для удобства использования:
```
NFR-USAB-XXX: [Название требования удобства использования]
Описание: [Описание требуемого удобства использования]
Критерии измерения:
- Время обучения: не более [время] для [тип пользователя]
- Количество кликов: не более [число] для [операция]
- Доступность: соответствие [стандарт] уровень [уровень]
- Удобство навигации: [метрики навигации]
Условия тестирования:
- Пользователи: [типы тестируемых пользователей]
- Сценарии: [тестовые сценарии использования]
- Инструменты: [инструменты для тестирования UX]
Приоритет: [Критический/Высокий/Средний/Низкий]
Обоснование: [важность для бизнеса]
```

#### Пример NFR удобства использования:
```
NFR-USAB-001: Удобство поиска товаров
Описание: Поиск товаров должен быть интуитивно понятным и быстрым
Критерии измерения:
- Время поиска: не более 3 кликов от главной страницы до результата
- Автодополнение: предложения появляются после ввода 2 символов
- Фильтры: не более 5 основных фильтров на странице
- Сортировка: минимум 3 варианта сортировки (цена, популярность, новизна)
- Мобильная версия: адаптивный дизайн для экранов от 320px
- Доступность: соответствие WCAG 2.1 AA
Условия тестирования:
- Пользователи: 20 пользователей разного возраста и опыта
- Сценарии: поиск по названию, категории, фильтрам
- Инструменты: UserTesting, Hotjar, Google Analytics
Приоритет: Высокий
Обоснование: Удобство поиска влияет на конверсию
```

### 6. Совместимость (Compatibility)

#### Шаблон NFR для совместимости:
```
NFR-COMP-XXX: [Название требования совместимости]
Описание: [Описание требуемой совместимости]
Критерии измерения:
- Браузерная совместимость: [список браузеров и версий]
- Платформенная совместимость: [операционные системы]
- Интеграционная совместимость: [API и протоколы]
- Обратная совместимость: [версии и миграции]
Условия тестирования:
- Среда тестирования: [список тестовых сред]
- Инструменты: [инструменты для тестирования совместимости]
- Автоматизация: [автоматизированные тесты совместимости]
Приоритет: [Критический/Высокий/Средний/Низкий]
Обоснование: [важность для бизнеса]
```

#### Пример NFR совместимости:
```
NFR-COMP-001: Браузерная совместимость
Описание: Веб-интерфейс должен работать во всех современных браузерах
Критерии измерения:
- Chrome: версии 90+ (поддержка 95% пользователей)
- Firefox: версии 88+ (поддержка 90% пользователей)
- Safari: версии 14+ на macOS и iOS (поддержка 85% пользователей)
- Edge: версии 90+ (поддержка 80% пользователей)
- Функциональность: 100% функций работают во всех поддерживаемых браузерах
- Производительность: отклонение времени загрузки не более 20% между браузерами
- Responsive дизайн: корректное отображение на экранах 320px-1920px
Условия тестирования:
- Среда: BrowserStack, Sauce Labs, реальные устройства
- Инструменты: Selenium, Playwright, Browser DevTools
- Автоматизация: кроссбраузерные тесты в CI/CD
Приоритет: Высокий
Обоснование: Охват максимальной аудитории пользователей
```

### 7. Переносимость (Portability)

#### Шаблон NFR для переносимости:
```
NFR-PORT-XXX: [Название требования переносимости]
Описание: [Описание требуемой переносимости системы]
Критерии измерения:
- Кроссплатформенность: [список поддерживаемых платформ]
- Облачная переносимость: [поддерживаемые облачные провайдеры]
- Контейнеризация: [требования к контейнеризации]
- Развертывание: [время и процедуры развертывания]
Условия тестирования:
- Среда развертывания: [список тестовых сред]
- Инструменты: [инструменты для тестирования переносимости]
- Автоматизация: [автоматизированные процедуры развертывания]
Приоритет: [Критический/Высокий/Средний/Низкий]
Обоснование: [важность для бизнеса]
```

#### Пример NFR переносимости:
```
NFR-PORT-001: Облачная переносимость
Описание: Система должна быть переносимой между облачными провайдерами
Критерии измерения:
- Поддерживаемые провайдеры: AWS, Azure, GCP, DigitalOcean
- Контейнеризация: Docker контейнеры для всех компонентов
- Оркестрация: Kubernetes для управления контейнерами
- Инфраструктура как код: Terraform для всех облачных ресурсов
- Время развертывания: не более 30 минут на новую среду
- Конфигурация: environment variables для всех настроек
- База данных: поддержка PostgreSQL, MySQL, MongoDB
Условия тестирования:
- Среда: тестирование на всех поддерживаемых провайдерах
- Инструменты: Terraform, Docker, Kubernetes, Helm
- Автоматизация: CI/CD pipeline для всех провайдеров
Приоритет: Средний
Обоснование: Гибкость в выборе облачного провайдера
```

### 8. Поддерживаемость (Maintainability)

#### Шаблон NFR для поддерживаемости:
```
NFR-MAINT-XXX: [Название требования поддерживаемости]
Описание: [Описание требуемой поддерживаемости системы]
Критерии измерения:
- Модульность: [структура и границы модулей]
- Документация: [требования к документации]
- Тестирование: [покрытие тестами и их типы]
- Развертывание: [время и процедуры обновлений]
Условия тестирования:
- Метрики качества кода: [инструменты и пороговые значения]
- Процедуры: [процедуры поддержки и обновления]
- Мониторинг: [метрики поддерживаемости]
Приоритет: [Критический/Высокий/Средний/Низкий]
Обоснование: [важность для бизнеса]
```

#### Пример NFR поддерживаемости:
```
NFR-MAINT-001: Качество кода и тестирование
Описание: Код должен быть качественным и хорошо протестированным
Критерии измерения:
- Покрытие тестами: не менее 80% для unit тестов, 60% для integration тестов
- Качество кода: SonarQube score не менее A (0 технических долгов)
- Документация: README для каждого модуля, API документация
- Модульность: четкие границы между компонентами, слабая связанность
- Стандарты кодирования: ESLint/Prettier для JavaScript, Pylint для Python
- Время сборки: не более 10 минут для полной сборки
- Время тестирования: не более 15 минут для всех тестов
Условия тестирования:
- Метрики: SonarQube, Jest coverage, ESLint
- Процедуры: code review, pair programming, automated testing
- Мониторинг: регулярные отчеты о качестве кода
Приоритет: Высокий
Обоснование: Качество кода влияет на скорость разработки
```

## Метрики и измерения

### Правила описания метрик

#### ✅ Правильно:
```
- Время загрузки: не более 2 секунд при нагрузке до 1000 пользователей
- Доступность: не менее 99.9% в месяц
- Пропускная способность: 1000 запросов в секунду
- Безопасность: блокировка после 5 неудачных попыток на 30 минут
```

#### ❌ Неправильно:
```
- Время загрузки: быстро
- Доступность: высокая
- Пропускная способность: много запросов
- Безопасность: защищенная система
```

### Условия тестирования
```
Условия измерения:
- Среда: Production-подобная (8 CPU, 16 GB RAM, SSD)
- Нагрузка: 1000 одновременных пользователей
- Длительность: 1 час
- Данные: 100,000 записей
- Сеть: 100 Mbps, задержка 50 мс
```

## Инструменты и методы

### Ключевые инструменты по категориям:
- **Производительность**: Apache JMeter, Lighthouse, New Relic
- **Безопасность**: OWASP ZAP, SonarQube, Burp Suite
- **Надежность**: Nagios, Zabbix, Prometheus
- **Удобство**: Google Analytics, Hotjar, UserTesting

### Методы измерения:
- **Нагрузочное тестирование**: Apache JMeter, Gatling
- **Мониторинг**: Prometheus + Grafana, New Relic
- **Анализ безопасности**: OWASP ZAP, Nessus
- **Юзабилити-тестирование**: A/B тесты, записи сессий

## Контрольные чек-листы

### Общий чек-лист NFR:
- [ ] Требование измеримо и тестируемо
- [ ] Указаны конкретные числовые значения с единицами измерения
- [ ] Определен приоритет требования
- [ ] Требование не противоречит другим NFR
- [ ] Требование реалистично для проекта
- [ ] Указано обоснование важности для бизнеса
- [ ] Определены условия измерения и тестирования
- [ ] Указаны инструменты для измерения

### Чек-листы по категориям:

#### Производительность
- [ ] Указаны целевые и граничные значения времени отклика
- [ ] Описаны условия нагрузки и тестирования
- [ ] Приведены инструменты измерения

#### Безопасность
- [ ] Описаны методы защиты и инструменты
- [ ] Указаны стандарты и соответствие
- [ ] Приведены сценарии тестирования

#### Надежность
- [ ] Указаны метрики доступности и восстановления
- [ ] Описаны планы резервирования
- [ ] Приведены сценарии отказа

#### Масштабируемость
- [ ] Описаны стратегии масштабирования
- [ ] Указаны граничные значения
- [ ] Приведены архитектурные решения

### Часто встречающиеся ошибки:
1. **Неопределенные формулировки**: "быстро" вместо "не более 2 секунд"
2. **Отсутствие единиц измерения**: "1000 пользователей" вместо "1000 одновременных пользователей"
3. **Нереалистичные требования**: "10 миллисекунд" вместо "100 миллисекунд"
4. **Отсутствие обоснования**: NFR без указания важности для бизнеса
5. **Противоречивые требования**: NFR, которые противоречат друг другу

### Практические рекомендации:
- Включайте методы и инструменты измерения для каждого NFR
- Указывайте условия тестирования и среды
- Определяйте граничные значения и сценарии деградации
- Документируйте конфликты и компромиссы
- Используйте версионирование и контроль изменений
- Связывайте NFR с архитектурными решениями
- Регулярно обновляйте документацию

## Примеры заполнения

### Пример 1: Веб-приложение электронной коммерции

```
NFR-PERF-001: Производительность главной страницы
Описание: Главная страница должна загружаться быстро для всех пользователей
Критерии измерения:
- Время загрузки: не более 2 секунд при нагрузке до 1000 пользователей
- Размер страницы: не более 2 МБ
- Количество HTTP запросов: не более 50
- Время отклика на действия: не более 1 секунды (95-й процентиль)
Условия измерения:
- Среда: 4 CPU, 8 GB RAM, 100 Mbps сеть
- Браузер: Chrome 90+
- Кэш: отключен
Инструменты: Lighthouse, WebPageTest, Apache JMeter
Приоритет: Высокий
Обоснование: Скорость загрузки влияет на bounce rate и конверсию
```

```
NFR-SEC-001: Защита персональных данных
Описание: Система должна обеспечивать безопасность персональных данных пользователей
Критерии измерения:
- Шифрование данных: AES-256 для данных в покое, TLS 1.3 для данных в транзите
- Аутентификация: многофакторная для администраторов, 2FA для пользователей
- Блокировка аккаунта: после 5 неудачных попыток на 30 минут
- Аудит: логирование всех операций с персональными данными
- Соответствие: GDPR, PCI DSS для платежных данных
Условия тестирования:
- Сценарии: penetration testing, vulnerability assessment
- Инструменты: OWASP ZAP, Burp Suite, Nessus
- Стандарты: OWASP Top 10, NIST Cybersecurity Framework
Приоритет: Критический
Обоснование: Соответствие требованиям регуляторов и защита репутации
```

### Пример 2: Мобильное приложение

```
NFR-USAB-001: Удобство использования мобильного приложения
Описание: Мобильное приложение должно быть интуитивно понятным для пользователей
Критерии измерения:
- Время обучения: не более 30 минут для нового пользователя
- Количество тапов: не более 3 для основных операций
- Размер кнопок: минимум 44x44 пикселя для удобного нажатия
- Поддержка жестов: свайп, пинч-зум, долгое нажатие
- Офлайн-режим: работа без интернета для основных функций
- Доступность: соответствие WCAG 2.1 AA
Условия тестирования:
- Устройства: iOS 14+, Android 10+, различные размеры экранов
- Пользователи: тестирование с реальными пользователями
- Инструменты: Firebase Analytics, Crashlytics, UserTesting
Приоритет: Высокий
Обоснование: Удобство использования критично для удержания пользователей
```

```
NFR-COMP-001: Совместимость мобильных платформ
Описание: Приложение должно работать на всех поддерживаемых мобильных платформах
Критерии измерения:
- iOS: версии 14+ (поддержка 95% пользователей iOS)
- Android: версии 10+ (поддержка 90% пользователей Android)
- Размеры экранов: от 320px до 428px по ширине
- Плотность пикселей: от 1x до 3x
- Ориентация: портретная и ландшафтная
- Производительность: отклонение времени отклика не более 15% между платформами
Условия тестирования:
- Устройства: реальные устройства и эмуляторы
- Инструменты: Firebase Test Lab, Appium, XCTest
- Автоматизация: кроссплатформенные тесты в CI/CD
Приоритет: Высокий
Обоснование: Охват максимальной аудитории мобильных пользователей
```

### Пример 3: API сервис

```
NFR-PERF-002: Производительность REST API
Описание: REST API должен обеспечивать высокую пропускную способность
Критерии измерения:
- Время отклика: не более 200 мс (99-й процентиль)
- Пропускная способность: 5000 запросов в секунду
- Latency: не более 50 мс при нормальной нагрузке
- Rate limiting: 1000 запросов в минуту на API Key
- Кэширование: TTL 5 минут для часто запрашиваемых данных
Условия измерения:
- Среда: 4 CPU, 8 GB RAM, 1 Gbps сеть
- Нагрузка: 1000 RPS в течение 1 часа
- Данные: 1,000,000 записей в базе данных
Инструменты: Artillery, k6, New Relic, Prometheus
Приоритет: Высокий
Обоснование: API используется мобильными приложениями и партнерами
```

```
NFR-SCAL-002: Масштабируемость API
Описание: API должен масштабироваться для поддержки роста нагрузки
Критерии измерения:
- Горизонтальное масштабирование: линейное увеличение до 20 серверов
- Автоматическое масштабирование: добавление серверов при CPU > 70%
- Балансировка нагрузки: равномерное распределение с отклонением не более 5%
- База данных: read replicas для чтения, connection pooling
- Кэширование: Redis cluster для распределенного кэширования
Условия тестирования:
- Сценарии: постепенное увеличение нагрузки, стресс-тестирование
- Архитектура: microservices, API Gateway, service mesh
- Мониторинг: метрики производительности и масштабирования
Приоритет: Высокий
Обоснование: Поддержка роста пользователей и партнерских интеграций
```

Используй эти примеры как эталон для создания качественных нефункциональных требований. 